!function(t){function e(e){for(var o,s,a=e[0],c=e[1],u=e[2],l=0,p=[];l<a.length;l++)s=a[l],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&p.push(r[s][0]),r[s]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(t[o]=c[o]);for(h&&h(e);p.length;)p.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],o=!0,a=1;a<n.length;a++){var c=n[a];0!==r[c]&&(o=!1)}o&&(i.splice(e--,1),t=s(s.s=n[0]))}return t}var o={},r={0:0},i=[];function s(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=o,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)s.d(n,o,function(e){return t[e]}.bind(null,o));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="";var a=window.webpackJsonp=window.webpackJsonp||[],c=a.push.bind(a);a.push=e,a=a.slice();for(var u=0;u<a.length;u++)e(a[u]);var h=c;i.push([534,1]),n()}({1455:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(1456),r=n(1458),i=n(1459);e.default=[r.BootScene,o.MainMenuScene,i.GameScene]},1456:function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=n(1457),s={active:!1,visible:!1,key:"MainMenu"},a=function(t){function e(){return t.call(this,s)||this}return r(e,t),e.prototype.create=function(){var t=this;this.add.text(100,50,'This is a sample main menu. Click the "Start" button below to run your game.',{fill:"#FFFFFF"}).setFontSize(24),new i.MenuButton(this,100,150,"Start Game",(function(){t.scene.start("Game")})),new i.MenuButton(this,100,250,"Settings",(function(){return console.log("settings button clicked")})),new i.MenuButton(this,100,350,"Help",(function(){return console.log("help button clicked")}))},e}(Phaser.Scene);e.MainMenuScene=a},1457:function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=n(155),s=10,a=200,c=50,u=function(t){function e(e,n,o,r,i){var u=t.call(this,e,n,o)||this;e.add.existing(u),u.setOrigin(0,0),u.label=e.add.text(n+s,o+s,r).setFontSize(18).setAlign("center");var h=u.label.width+s,l=u.label.height+s;return u.width=h>=a?h:a,u.height=l>=c?l:c,u.setInteractive({useHandCursor:!0}).on("pointerover",u.enterMenuButtonHoverState).on("pointerout",u.enterMenuButtonRestState).on("pointerdown",u.enterMenuButtonActiveState).on("pointerup",u.enterMenuButtonHoverState),i&&u.on("pointerup",i),u.enterMenuButtonRestState(),u}return r(e,t),e.prototype.enterMenuButtonHoverState=function(){this.label.setColor("#000000"),this.setFillStyle(8947848)},e.prototype.enterMenuButtonRestState=function(){this.label.setColor("#FFFFFF"),this.setFillStyle(8947848)},e.prototype.enterMenuButtonActiveState=function(){this.label.setColor("#BBBBBB"),this.setFillStyle(4473924)},e}(i.GameObjects.Rectangle);e.MenuButton=u},1458:function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=n(258),s={active:!1,visible:!1,key:"Boot"},a=function(t){function e(){return t.call(this,s)||this}return r(e,t),e.prototype.preload=function(){var t=this,e=.5*i.getGameWidth(this),n=.5*i.getGameHeight(this),o=this.add.rectangle(e,n,400,100,0),r=this.add.rectangle(e+20-.5*o.width,n,10,80,8947848),s=this.add.text(e-75,n-100,"Loading...").setFontSize(24),a=this.add.text(e-25,n,"0%").setFontSize(24),c=this.add.text(e-25,n+100,"").setFontSize(24);this.load.on("progress",(function(t){r.width=370*t;var e=100*t;a.setText(e+"%")})),this.load.on("fileprogress",(function(t){c.setText(t.key)})),this.load.on("complete",(function(){s.destroy(),a.destroy(),c.destroy(),r.destroy(),o.destroy(),t.scene.start("MainMenu")})),this.loadAssets()},e.prototype.loadAssets=function(){this.load.image("man","src/assets/character.png"),this.load.image("background","src/assets/desert_sand2_s.jpg"),this.load.image("bomb","src/assets/bombs.png")},e}(Phaser.Scene);e.BootScene=a},1459:function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=n(258),s=n(1460),a=n(1461),c={active:!1,visible:!1,key:"Game"},u=function(t){function e(){return t.call(this,c)||this}return r(e,t),e.prototype.init=function(){this.score=0,this.lives=50},e.prototype.create=function(){this.add.image(400,400,"background"),this.scoreText=this.add.text(i.getGameWidth(this)-100,10,"Score: "+this.score),this.livesText=this.add.text(10,10,"Lives left: "+this.lives),this.character=new s.Character({scene:this,x:20,y:i.getGameHeight(this)-50,key:"man"}),this.bombs=this.add.group({classType:a.Bomb,runChildUpdate:!0}),this.physics.world.setBounds(0,0,i.getGameWidth(this),i.getGameHeight(this)),this.scoreEvent=this.time.addEvent({delay:1e3,callback:this.dropBombs,callbackScope:this,loop:!0}),this.livesEvent=this.events,this.livesEvent.addListener("missedBomb",this.missedBomb,this),this.physics.add.collider(this.bombs,this.character,this.onhitbomb,null,this)},e.prototype.update=function(){this.character.update(),this.lives<=0&&this.showGameOver()},e.prototype.dropBombs=function(){this.createBomb()},e.prototype.createBomb=function(){this.bombs.add(new a.Bomb({scene:this,x:Phaser.Math.Between(0,i.getGameWidth(this)-32),y:0,key:"bomb"}))},e.prototype.onhitbomb=function(t,e){t.destroy(),this.score++,this.scoreText.setText("Score: "+this.score)},e.prototype.missedBomb=function(){this.lives--,this.livesText.setText("Lives left: "+this.lives)},e.prototype.showGameOver=function(){this.add.text(.5*i.getGameWidth(this)-100,.5*i.getGameHeight(this),"GAME OVER",{fontSize:30}),this.physics.shutdown(),this.scoreEvent.destroy(),this.livesEvent.removeListener("missedBomb"),this.time.addEvent({delay:8e3,callback:this.gameRestart,callbackScope:this,loop:!1})},e.prototype.gameRestart=function(){this.scene.restart()},e}(Phaser.Scene);e.GameScene=u},1460:function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(e){var n=t.call(this,e.scene,e.x,e.y,e.key,e.frame)||this;return n.speed=200,n.setOrigin(0,0),n.scene.physics.world.enable(n),n.body.setGravityY(1e4),n.body.setCollideWorldBounds(!0),n.cursorKeys=n.scene.input.keyboard.createCursorKeys(),n.scene.add.existing(n),n}return r(e,t),e.prototype.update=function(){var t=new Phaser.Math.Vector2(0,0);this.cursorKeys.left.isDown&&(t.x-=1),this.cursorKeys.right.isDown&&(t.x+=1);var e=t.normalize();this.body.setVelocity(e.x*this.speed,e.y*this.speed)},e}(Phaser.GameObjects.Sprite);e.Character=i},1461:function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=n(258),s=function(t){function e(e){var n=t.call(this,e.scene,e.x,e.y,e.key,e.frame)||this;return n.gravity=100,n.setOrigin(0,0),n.scene.physics.world.enable(n),n.body.setGravityY(150),n.missedBomb=n.scene.events,n.scene.add.existing(n),n}return r(e,t),e.prototype.update=function(){this.y>i.getGameHeight(this.scene)&&(this.missedBomb.emit("missedBomb"),this.destroy())},e}(Phaser.GameObjects.Sprite);e.Bomb=s},258:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getGameWidth=function(t){return t.game.scale.width},e.getGameHeight=function(t){return t.game.scale.height}},534:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(155),r=n(1455),i={title:"Sample",type:o.AUTO,scale:{width:800,height:600},scene:r.default,physics:{default:"arcade",arcade:{debug:!1,gravity:{x:0,y:5}}},render:{pixelArt:!0},parent:"content",backgroundColor:"#000000"};e.game=new o.Game(i),window.addEventListener("resize",(function(){e.game.scale.refresh()}))}});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL3NjZW5lcy9pbmRleC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvc2NlbmVzL21haW4tbWVudS1zY2VuZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvdWkvbWVudS1idXR0b24udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3NjZW5lcy9ib290LXNjZW5lLnRzIiwid2VicGFjazovLy8uL3NyYy9zY2VuZXMvZ2FtZS1zY2VuZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbW9kZWxzL2NoYXJhY3Rlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbW9kZWxzL2JvbWJzLnRzIiwid2VicGFjazovLy8uL3NyYy9oZWxwZXJzLnRzIiwid2VicGFjazovLy8uL3NyYy9tYWluLnRzIl0sIm5hbWVzIjpbIndlYnBhY2tKc29ucENhbGxiYWNrIiwiZGF0YSIsIm1vZHVsZUlkIiwiY2h1bmtJZCIsImNodW5rSWRzIiwibW9yZU1vZHVsZXMiLCJleGVjdXRlTW9kdWxlcyIsImkiLCJyZXNvbHZlcyIsImxlbmd0aCIsIk9iamVjdCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsImluc3RhbGxlZENodW5rcyIsInB1c2giLCJtb2R1bGVzIiwicGFyZW50SnNvbnBGdW5jdGlvbiIsInNoaWZ0IiwiZGVmZXJyZWRNb2R1bGVzIiwiYXBwbHkiLCJjaGVja0RlZmVycmVkTW9kdWxlcyIsInJlc3VsdCIsImRlZmVycmVkTW9kdWxlIiwiZnVsZmlsbGVkIiwiaiIsImRlcElkIiwic3BsaWNlIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsInMiLCJpbnN0YWxsZWRNb2R1bGVzIiwiMCIsImV4cG9ydHMiLCJtb2R1bGUiLCJsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInAiLCJqc29ucEFycmF5Iiwid2luZG93Iiwib2xkSnNvbnBGdW5jdGlvbiIsInNsaWNlIiwiQm9vdFNjZW5lIiwiTWFpbk1lbnVTY2VuZSIsIkdhbWVTY2VuZSIsInNjZW5lQ29uZmlnIiwiYWN0aXZlIiwidmlzaWJsZSIsInRoaXMiLCJhZGQiLCJ0ZXh0IiwiZmlsbCIsInNldEZvbnRTaXplIiwiTWVudUJ1dHRvbiIsInNjZW5lIiwic3RhcnQiLCJjb25zb2xlIiwibG9nIiwiUGhhc2VyIiwiU2NlbmUiLCJwYWRkaW5nIiwibWluaW11bVdpZHRoIiwibWluaW11bUhlaWdodCIsIngiLCJ5Iiwib25DbGljayIsImV4aXN0aW5nIiwic2V0T3JpZ2luIiwibGFiZWwiLCJzZXRBbGlnbiIsImxhYmVsV2lkdGgiLCJ3aWR0aCIsImxhYmVsSGVpZ2h0IiwiaGVpZ2h0Iiwic2V0SW50ZXJhY3RpdmUiLCJ1c2VIYW5kQ3Vyc29yIiwib24iLCJlbnRlck1lbnVCdXR0b25Ib3ZlclN0YXRlIiwiZW50ZXJNZW51QnV0dG9uUmVzdFN0YXRlIiwiZW50ZXJNZW51QnV0dG9uQWN0aXZlU3RhdGUiLCJzZXRDb2xvciIsInNldEZpbGxTdHlsZSIsIkdhbWVPYmplY3RzIiwiUmVjdGFuZ2xlIiwicHJlbG9hZCIsImhhbGZXaWR0aCIsImdldEdhbWVXaWR0aCIsImhhbGZIZWlnaHQiLCJnZXRHYW1lSGVpZ2h0IiwicHJvZ3Jlc3NCYXJDb250YWluZXIiLCJyZWN0YW5nbGUiLCJwcm9ncmVzc0JhciIsInByb2dyZXNzQmFySGVpZ2h0IiwibG9hZGluZ1RleHQiLCJwZXJjZW50VGV4dCIsImFzc2V0VGV4dCIsImxvYWQiLCJwZXJjZW50Iiwic2V0VGV4dCIsImZpbGUiLCJkZXN0cm95IiwibG9hZEFzc2V0cyIsImltYWdlIiwiaW5pdCIsInNjb3JlIiwibGl2ZXMiLCJzY29yZVRleHQiLCJsaXZlc1RleHQiLCJjaGFyYWN0ZXIiLCJDaGFyYWN0ZXIiLCJib21icyIsImdyb3VwIiwiY2xhc3NUeXBlIiwiQm9tYiIsInJ1bkNoaWxkVXBkYXRlIiwicGh5c2ljcyIsIndvcmxkIiwic2V0Qm91bmRzIiwic2NvcmVFdmVudCIsInRpbWUiLCJhZGRFdmVudCIsImRlbGF5IiwiY2FsbGJhY2siLCJkcm9wQm9tYnMiLCJjYWxsYmFja1Njb3BlIiwibG9vcCIsImxpdmVzRXZlbnQiLCJldmVudHMiLCJhZGRMaXN0ZW5lciIsIm1pc3NlZEJvbWIiLCJjb2xsaWRlciIsIm9uaGl0Ym9tYiIsInVwZGF0ZSIsInNob3dHYW1lT3ZlciIsImNyZWF0ZUJvbWIiLCJNYXRoIiwiQmV0d2VlbiIsIm9iamVjdDEiLCJvYmplY3QyIiwiZm9udFNpemUiLCJzaHV0ZG93biIsInJlbW92ZUxpc3RlbmVyIiwiZ2FtZVJlc3RhcnQiLCJyZXN0YXJ0IiwicGFyYW1zIiwiZnJhbWUiLCJzcGVlZCIsImVuYWJsZSIsImJvZHkiLCJzZXRHcmF2aXR5WSIsInNldENvbGxpZGVXb3JsZEJvdW5kcyIsImN1cnNvcktleXMiLCJpbnB1dCIsImtleWJvYXJkIiwiY3JlYXRlQ3Vyc29yS2V5cyIsInZlbG9jaXR5IiwiVmVjdG9yMiIsImxlZnQiLCJpc0Rvd24iLCJyaWdodCIsIm5vcm1hbGl6ZWRWZWxvY2l0eSIsIm5vcm1hbGl6ZSIsInNldFZlbG9jaXR5IiwiU3ByaXRlIiwiZ3Jhdml0eSIsImVtaXQiLCJnYW1lIiwic2NhbGUiLCJnYW1lQ29uZmlnIiwidGl0bGUiLCJ0eXBlIiwiQVVUTyIsImRlZmF1bHQiLCJhcmNhZGUiLCJkZWJ1ZyIsInJlbmRlciIsInBpeGVsQXJ0IiwicGFyZW50IiwiYmFja2dyb3VuZENvbG9yIiwiR2FtZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZWZyZXNoIl0sIm1hcHBpbmdzIjoiYUFDRSxTQUFTQSxFQUFxQkMsR0FRN0IsSUFQQSxJQU1JQyxFQUFVQyxFQU5WQyxFQUFXSCxFQUFLLEdBQ2hCSSxF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TTlGLFMsa0ZDUDVCLGFBQ0EsVUFFTStGLEVBQTJDLENBQy9DQyxNQUFPLFNBRVBDLEtBQU1oSCxFQUFPaUgsS0FFYkosTUFBTyxDQUNMaEcsTUFBTyxJQUNQRSxPQUFRLEtBR1ZuQixNQUFPLFVBRVA2RCxRQUFTLENBQ1B5RCxRQUFTLFNBQ1RDLE9BQVEsQ0FDTkMsT0FBTyxFQUNQVixRQUFTLENBQUVyRyxFQUFHLEVBQUdDLEVBQUcsS0FJeEIrRyxPQUFRLENBQUVDLFVBQVUsR0FFcEJDLE9BQVEsVUFDUkMsZ0JBQWlCLFdBR04sRUFBQVosS0FBTyxJQUFJNUcsRUFBT3lILEtBQUtYLEdBRXBDakksT0FBTzZJLGlCQUFpQixVQUFVLFdBQ2hDLEVBQUFkLEtBQUtDLE1BQU1jIiwiZmlsZSI6ImFwcC5idW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBpbnN0YWxsIGEgSlNPTlAgY2FsbGJhY2sgZm9yIGNodW5rIGxvYWRpbmdcbiBcdGZ1bmN0aW9uIHdlYnBhY2tKc29ucENhbGxiYWNrKGRhdGEpIHtcbiBcdFx0dmFyIGNodW5rSWRzID0gZGF0YVswXTtcbiBcdFx0dmFyIG1vcmVNb2R1bGVzID0gZGF0YVsxXTtcbiBcdFx0dmFyIGV4ZWN1dGVNb2R1bGVzID0gZGF0YVsyXTtcblxuIFx0XHQvLyBhZGQgXCJtb3JlTW9kdWxlc1wiIHRvIHRoZSBtb2R1bGVzIG9iamVjdCxcbiBcdFx0Ly8gdGhlbiBmbGFnIGFsbCBcImNodW5rSWRzXCIgYXMgbG9hZGVkIGFuZCBmaXJlIGNhbGxiYWNrXG4gXHRcdHZhciBtb2R1bGVJZCwgY2h1bmtJZCwgaSA9IDAsIHJlc29sdmVzID0gW107XG4gXHRcdGZvcig7aSA8IGNodW5rSWRzLmxlbmd0aDsgaSsrKSB7XG4gXHRcdFx0Y2h1bmtJZCA9IGNodW5rSWRzW2ldO1xuIFx0XHRcdGlmKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChpbnN0YWxsZWRDaHVua3MsIGNodW5rSWQpICYmIGluc3RhbGxlZENodW5rc1tjaHVua0lkXSkge1xuIFx0XHRcdFx0cmVzb2x2ZXMucHVzaChpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF1bMF0pO1xuIFx0XHRcdH1cbiBcdFx0XHRpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0gPSAwO1xuIFx0XHR9XG4gXHRcdGZvcihtb2R1bGVJZCBpbiBtb3JlTW9kdWxlcykge1xuIFx0XHRcdGlmKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChtb3JlTW9kdWxlcywgbW9kdWxlSWQpKSB7XG4gXHRcdFx0XHRtb2R1bGVzW21vZHVsZUlkXSA9IG1vcmVNb2R1bGVzW21vZHVsZUlkXTtcbiBcdFx0XHR9XG4gXHRcdH1cbiBcdFx0aWYocGFyZW50SnNvbnBGdW5jdGlvbikgcGFyZW50SnNvbnBGdW5jdGlvbihkYXRhKTtcblxuIFx0XHR3aGlsZShyZXNvbHZlcy5sZW5ndGgpIHtcbiBcdFx0XHRyZXNvbHZlcy5zaGlmdCgpKCk7XG4gXHRcdH1cblxuIFx0XHQvLyBhZGQgZW50cnkgbW9kdWxlcyBmcm9tIGxvYWRlZCBjaHVuayB0byBkZWZlcnJlZCBsaXN0XG4gXHRcdGRlZmVycmVkTW9kdWxlcy5wdXNoLmFwcGx5KGRlZmVycmVkTW9kdWxlcywgZXhlY3V0ZU1vZHVsZXMgfHwgW10pO1xuXG4gXHRcdC8vIHJ1biBkZWZlcnJlZCBtb2R1bGVzIHdoZW4gYWxsIGNodW5rcyByZWFkeVxuIFx0XHRyZXR1cm4gY2hlY2tEZWZlcnJlZE1vZHVsZXMoKTtcbiBcdH07XG4gXHRmdW5jdGlvbiBjaGVja0RlZmVycmVkTW9kdWxlcygpIHtcbiBcdFx0dmFyIHJlc3VsdDtcbiBcdFx0Zm9yKHZhciBpID0gMDsgaSA8IGRlZmVycmVkTW9kdWxlcy5sZW5ndGg7IGkrKykge1xuIFx0XHRcdHZhciBkZWZlcnJlZE1vZHVsZSA9IGRlZmVycmVkTW9kdWxlc1tpXTtcbiBcdFx0XHR2YXIgZnVsZmlsbGVkID0gdHJ1ZTtcbiBcdFx0XHRmb3IodmFyIGogPSAxOyBqIDwgZGVmZXJyZWRNb2R1bGUubGVuZ3RoOyBqKyspIHtcbiBcdFx0XHRcdHZhciBkZXBJZCA9IGRlZmVycmVkTW9kdWxlW2pdO1xuIFx0XHRcdFx0aWYoaW5zdGFsbGVkQ2h1bmtzW2RlcElkXSAhPT0gMCkgZnVsZmlsbGVkID0gZmFsc2U7XG4gXHRcdFx0fVxuIFx0XHRcdGlmKGZ1bGZpbGxlZCkge1xuIFx0XHRcdFx0ZGVmZXJyZWRNb2R1bGVzLnNwbGljZShpLS0sIDEpO1xuIFx0XHRcdFx0cmVzdWx0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSBkZWZlcnJlZE1vZHVsZVswXSk7XG4gXHRcdFx0fVxuIFx0XHR9XG5cbiBcdFx0cmV0dXJuIHJlc3VsdDtcbiBcdH1cblxuIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gb2JqZWN0IHRvIHN0b3JlIGxvYWRlZCBhbmQgbG9hZGluZyBjaHVua3NcbiBcdC8vIHVuZGVmaW5lZCA9IGNodW5rIG5vdCBsb2FkZWQsIG51bGwgPSBjaHVuayBwcmVsb2FkZWQvcHJlZmV0Y2hlZFxuIFx0Ly8gUHJvbWlzZSA9IGNodW5rIGxvYWRpbmcsIDAgPSBjaHVuayBsb2FkZWRcbiBcdHZhciBpbnN0YWxsZWRDaHVua3MgPSB7XG4gXHRcdDA6IDBcbiBcdH07XG5cbiBcdHZhciBkZWZlcnJlZE1vZHVsZXMgPSBbXTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuIFx0dmFyIGpzb25wQXJyYXkgPSB3aW5kb3dbXCJ3ZWJwYWNrSnNvbnBcIl0gPSB3aW5kb3dbXCJ3ZWJwYWNrSnNvbnBcIl0gfHwgW107XG4gXHR2YXIgb2xkSnNvbnBGdW5jdGlvbiA9IGpzb25wQXJyYXkucHVzaC5iaW5kKGpzb25wQXJyYXkpO1xuIFx0anNvbnBBcnJheS5wdXNoID0gd2VicGFja0pzb25wQ2FsbGJhY2s7XG4gXHRqc29ucEFycmF5ID0ganNvbnBBcnJheS5zbGljZSgpO1xuIFx0Zm9yKHZhciBpID0gMDsgaSA8IGpzb25wQXJyYXkubGVuZ3RoOyBpKyspIHdlYnBhY2tKc29ucENhbGxiYWNrKGpzb25wQXJyYXlbaV0pO1xuIFx0dmFyIHBhcmVudEpzb25wRnVuY3Rpb24gPSBvbGRKc29ucEZ1bmN0aW9uO1xuXG5cbiBcdC8vIGFkZCBlbnRyeSBtb2R1bGUgdG8gZGVmZXJyZWQgbGlzdFxuIFx0ZGVmZXJyZWRNb2R1bGVzLnB1c2goWzUzNCwxXSk7XG4gXHQvLyBydW4gZGVmZXJyZWQgbW9kdWxlcyB3aGVuIHJlYWR5XG4gXHRyZXR1cm4gY2hlY2tEZWZlcnJlZE1vZHVsZXMoKTtcbiIsImltcG9ydCB7IE1haW5NZW51U2NlbmUgfSBmcm9tICcuL21haW4tbWVudS1zY2VuZSc7XHJcbmltcG9ydCB7IEJvb3RTY2VuZSB9IGZyb20gJy4vYm9vdC1zY2VuZSc7XHJcbmltcG9ydCB7IEdhbWVTY2VuZSB9IGZyb20gJy4vZ2FtZS1zY2VuZSc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBbXHJcbiAgQm9vdFNjZW5lLFxyXG4gIE1haW5NZW51U2NlbmUsXHJcbiAgR2FtZVNjZW5lLFxyXG5dO1xyXG4iLCJpbXBvcnQgeyBNZW51QnV0dG9uIH0gZnJvbSAnLi4vdWkvbWVudS1idXR0b24nO1xyXG5cclxuY29uc3Qgc2NlbmVDb25maWc6IFBoYXNlci5UeXBlcy5TY2VuZXMuU2V0dGluZ3NDb25maWcgPSB7XHJcbiAgYWN0aXZlOiBmYWxzZSxcclxuICB2aXNpYmxlOiBmYWxzZSxcclxuICBrZXk6ICdNYWluTWVudScsXHJcbn07XHJcblxyXG4vKipcclxuICogVGhlIGluaXRpYWwgc2NlbmUgdGhhdCBzdGFydHMsIHNob3dzIHRoZSBzcGxhc2ggc2NyZWVucywgYW5kIGxvYWRzIHRoZSBuZWNlc3NhcnkgYXNzZXRzLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIE1haW5NZW51U2NlbmUgZXh0ZW5kcyBQaGFzZXIuU2NlbmUge1xyXG4gIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgc3VwZXIoc2NlbmVDb25maWcpO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGNyZWF0ZSgpIHtcclxuICAgIHRoaXMuYWRkLnRleHQoMTAwLCA1MCwgJ1RoaXMgaXMgYSBzYW1wbGUgbWFpbiBtZW51LiBDbGljayB0aGUgXCJTdGFydFwiIGJ1dHRvbiBiZWxvdyB0byBydW4geW91ciBnYW1lLicsIHsgZmlsbDogJyNGRkZGRkYnIH0pLnNldEZvbnRTaXplKDI0KTtcclxuXHJcbiAgICBuZXcgTWVudUJ1dHRvbih0aGlzLCAxMDAsIDE1MCwgJ1N0YXJ0IEdhbWUnLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuc2NlbmUuc3RhcnQoJ0dhbWUnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIG5ldyBNZW51QnV0dG9uKHRoaXMsIDEwMCwgMjUwLCAnU2V0dGluZ3MnLCAoKSA9PiBjb25zb2xlLmxvZygnc2V0dGluZ3MgYnV0dG9uIGNsaWNrZWQnKSk7XHJcblxyXG4gICAgbmV3IE1lbnVCdXR0b24odGhpcywgMTAwLCAzNTAsICdIZWxwJywgKCkgPT4gY29uc29sZS5sb2coJ2hlbHAgYnV0dG9uIGNsaWNrZWQnKSk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCAqIGFzIFBoYXNlciBmcm9tICdwaGFzZXInO1xyXG5cclxuY29uc3QgcGFkZGluZyA9IDEwO1xyXG5jb25zdCBtaW5pbXVtV2lkdGggPSAyMDA7XHJcbmNvbnN0IG1pbmltdW1IZWlnaHQgPSA1MDtcclxuXHJcbmV4cG9ydCBjbGFzcyBNZW51QnV0dG9uIGV4dGVuZHMgUGhhc2VyLkdhbWVPYmplY3RzLlJlY3RhbmdsZSB7XHJcbiAgcHJpdmF0ZSBsYWJlbDogUGhhc2VyLkdhbWVPYmplY3RzLlRleHQ7XHJcblxyXG4gIGNvbnN0cnVjdG9yKHNjZW5lOiBQaGFzZXIuU2NlbmUsIHg6IG51bWJlciwgeTogbnVtYmVyLCB0ZXh0OiBzdHJpbmcsIG9uQ2xpY2s/OiAoKSA9PiB2b2lkKSB7XHJcbiAgICBzdXBlcihzY2VuZSwgeCwgeSk7XHJcbiAgICBzY2VuZS5hZGQuZXhpc3RpbmcodGhpcyk7XHJcbiAgICB0aGlzLnNldE9yaWdpbigwLCAwKTtcclxuXHJcbiAgICB0aGlzLmxhYmVsID0gc2NlbmUuYWRkLnRleHQoeCArIHBhZGRpbmcsIHkgKyBwYWRkaW5nLCB0ZXh0KS5zZXRGb250U2l6ZSgxOCkuc2V0QWxpZ24oJ2NlbnRlcicpO1xyXG5cclxuICAgIGNvbnN0IGxhYmVsV2lkdGggPSB0aGlzLmxhYmVsLndpZHRoICsgcGFkZGluZztcclxuICAgIGNvbnN0IGxhYmVsSGVpZ2h0ID0gdGhpcy5sYWJlbC5oZWlnaHQgKyBwYWRkaW5nO1xyXG5cclxuICAgIHRoaXMud2lkdGggPSBsYWJlbFdpZHRoID49IG1pbmltdW1XaWR0aCA/IGxhYmVsV2lkdGggOiBtaW5pbXVtV2lkdGg7XHJcbiAgICB0aGlzLmhlaWdodCA9IGxhYmVsSGVpZ2h0ID49IG1pbmltdW1IZWlnaHQgPyBsYWJlbEhlaWdodCA6IG1pbmltdW1IZWlnaHQ7XHJcblxyXG4gICAgdGhpcy5zZXRJbnRlcmFjdGl2ZSh7IHVzZUhhbmRDdXJzb3I6IHRydWUgfSlcclxuICAgICAgLm9uKCdwb2ludGVyb3ZlcicsIHRoaXMuZW50ZXJNZW51QnV0dG9uSG92ZXJTdGF0ZSlcclxuICAgICAgLm9uKCdwb2ludGVyb3V0JywgdGhpcy5lbnRlck1lbnVCdXR0b25SZXN0U3RhdGUpXHJcbiAgICAgIC5vbigncG9pbnRlcmRvd24nLCB0aGlzLmVudGVyTWVudUJ1dHRvbkFjdGl2ZVN0YXRlKVxyXG4gICAgICAub24oJ3BvaW50ZXJ1cCcsIHRoaXMuZW50ZXJNZW51QnV0dG9uSG92ZXJTdGF0ZSk7XHJcblxyXG4gICAgaWYgKG9uQ2xpY2spIHtcclxuICAgICAgdGhpcy5vbigncG9pbnRlcnVwJywgb25DbGljayk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5lbnRlck1lbnVCdXR0b25SZXN0U3RhdGUoKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgZW50ZXJNZW51QnV0dG9uSG92ZXJTdGF0ZSgpIHtcclxuICAgIHRoaXMubGFiZWwuc2V0Q29sb3IoJyMwMDAwMDAnKTtcclxuICAgIHRoaXMuc2V0RmlsbFN0eWxlKDB4ODg4ODg4KTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgZW50ZXJNZW51QnV0dG9uUmVzdFN0YXRlKCkge1xyXG4gICAgdGhpcy5sYWJlbC5zZXRDb2xvcignI0ZGRkZGRicpO1xyXG4gICAgdGhpcy5zZXRGaWxsU3R5bGUoMHg4ODg4ODgpO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBlbnRlck1lbnVCdXR0b25BY3RpdmVTdGF0ZSgpIHtcclxuICAgIHRoaXMubGFiZWwuc2V0Q29sb3IoJyNCQkJCQkInKTtcclxuICAgIHRoaXMuc2V0RmlsbFN0eWxlKDB4NDQ0NDQ0KTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgZ2V0R2FtZVdpZHRoLCBnZXRHYW1lSGVpZ2h0IH0gZnJvbSAnLi4vaGVscGVycyc7XHJcblxyXG5jb25zdCBzY2VuZUNvbmZpZzogUGhhc2VyLlR5cGVzLlNjZW5lcy5TZXR0aW5nc0NvbmZpZyA9IHtcclxuICBhY3RpdmU6IGZhbHNlLFxyXG4gIHZpc2libGU6IGZhbHNlLFxyXG4gIGtleTogJ0Jvb3QnLFxyXG59O1xyXG5cclxuLyoqXHJcbiAqIFRoZSBpbml0aWFsIHNjZW5lIHRoYXQgbG9hZHMgYWxsIG5lY2Vzc2FyeSBhc3NldHMgdG8gdGhlIGdhbWUgYW5kIGRpc3BsYXlzIGEgbG9hZGluZyBiYXIuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgQm9vdFNjZW5lIGV4dGVuZHMgUGhhc2VyLlNjZW5lIHtcclxuICBjb25zdHJ1Y3RvcigpIHtcclxuICAgIHN1cGVyKHNjZW5lQ29uZmlnKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBwcmVsb2FkKCkge1xyXG4gICAgY29uc3QgaGFsZldpZHRoID0gZ2V0R2FtZVdpZHRoKHRoaXMpICogMC41O1xyXG4gICAgY29uc3QgaGFsZkhlaWdodCA9IGdldEdhbWVIZWlnaHQodGhpcykgKiAwLjU7XHJcblxyXG4gICAgY29uc3QgcHJvZ3Jlc3NCYXJIZWlnaHQgPSAxMDA7XHJcbiAgICBjb25zdCBwcm9ncmVzc0JhcldpZHRoID0gNDAwO1xyXG5cclxuICAgIGNvbnN0IHByb2dyZXNzQmFyQ29udGFpbmVyID0gdGhpcy5hZGQucmVjdGFuZ2xlKGhhbGZXaWR0aCwgaGFsZkhlaWdodCwgcHJvZ3Jlc3NCYXJXaWR0aCwgcHJvZ3Jlc3NCYXJIZWlnaHQsIDB4MDAwMDAwKTtcclxuICAgIGNvbnN0IHByb2dyZXNzQmFyID0gdGhpcy5hZGQucmVjdGFuZ2xlKGhhbGZXaWR0aCArIDIwIC0gcHJvZ3Jlc3NCYXJDb250YWluZXIud2lkdGggKiAwLjUsIGhhbGZIZWlnaHQsIDEwLCBwcm9ncmVzc0JhckhlaWdodCAtIDIwLCAweDg4ODg4OCk7XHJcblxyXG4gICAgY29uc3QgbG9hZGluZ1RleHQgPSB0aGlzLmFkZC50ZXh0KGhhbGZXaWR0aCAtIDc1LCBoYWxmSGVpZ2h0IC0gMTAwLCAnTG9hZGluZy4uLicpLnNldEZvbnRTaXplKDI0KTtcclxuICAgIGNvbnN0IHBlcmNlbnRUZXh0ID0gdGhpcy5hZGQudGV4dChoYWxmV2lkdGggLSAyNSwgaGFsZkhlaWdodCwgJzAlJykuc2V0Rm9udFNpemUoMjQpO1xyXG4gICAgY29uc3QgYXNzZXRUZXh0ID0gdGhpcy5hZGQudGV4dChoYWxmV2lkdGggLSAyNSwgaGFsZkhlaWdodCArIDEwMCwgJycpLnNldEZvbnRTaXplKDI0KTtcclxuXHJcbiAgICB0aGlzLmxvYWQub24oJ3Byb2dyZXNzJywgKHZhbHVlKSA9PiB7XHJcbiAgICAgIHByb2dyZXNzQmFyLndpZHRoID0gKHByb2dyZXNzQmFyV2lkdGggLSAzMCkgKiB2YWx1ZTtcclxuXHJcbiAgICAgIGNvbnN0IHBlcmNlbnQgPSB2YWx1ZSAqIDEwMDtcclxuICAgICAgcGVyY2VudFRleHQuc2V0VGV4dChgJHtwZXJjZW50fSVgKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMubG9hZC5vbignZmlsZXByb2dyZXNzJywgKGZpbGUpID0+IHtcclxuICAgICAgYXNzZXRUZXh0LnNldFRleHQoZmlsZS5rZXkpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5sb2FkLm9uKCdjb21wbGV0ZScsICgpID0+IHtcclxuICAgICAgbG9hZGluZ1RleHQuZGVzdHJveSgpO1xyXG4gICAgICBwZXJjZW50VGV4dC5kZXN0cm95KCk7XHJcbiAgICAgIGFzc2V0VGV4dC5kZXN0cm95KCk7XHJcbiAgICAgIHByb2dyZXNzQmFyLmRlc3Ryb3koKTtcclxuICAgICAgcHJvZ3Jlc3NCYXJDb250YWluZXIuZGVzdHJveSgpO1xyXG5cclxuICAgICAgdGhpcy5zY2VuZS5zdGFydCgnTWFpbk1lbnUnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMubG9hZEFzc2V0cygpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQWxsIGFzc2V0cyB0aGF0IG5lZWQgdG8gYmUgbG9hZGVkIGJ5IHRoZSBnYW1lIChzcHJpdGVzLCBpbWFnZXMsIGFuaW1hdGlvbnMsIHRpbGVzLCBtdXNpYywgZXRjKVxyXG4gICAqIHNob3VsZCBiZSBhZGRlZCB0byB0aGlzIG1ldGhvZC4gT25jZSBsb2FkZWQgaW4sIHRoZSBsb2FkZXIgd2lsbCBrZWVwIHRyYWNrIG9mIHRoZW0sIGluZGVwZWRlbnQgb2Ygd2hpY2ggc2NlbmVcclxuICAgKiBpcyBjdXJyZW50bHkgYWN0aXZlLCBzbyB0aGV5IGNhbiBiZSBhY2Nlc3NlZCBhbnl3aGVyZS5cclxuICAgKi9cclxuICBwcml2YXRlIGxvYWRBc3NldHMoKSB7XHJcbiAgICAvLyBMb2FkIHNhbXBsZSBhc3NldHNcclxuXHJcbiAgICAvLyBTb3VyY2U6IE9wZW4gR2FtZSBBcnRcclxuICAgIHRoaXMubG9hZC5pbWFnZSgnbWFuJywgJ3NyYy9hc3NldHMvY2hhcmFjdGVyLnBuZycpO1xyXG4gICAgdGhpcy5sb2FkLmltYWdlKCdiYWNrZ3JvdW5kJywgJ3NyYy9hc3NldHMvZGVzZXJ0X3NhbmQyX3MuanBnJyk7XHJcbiAgICB0aGlzLmxvYWQuaW1hZ2UoJ2JvbWInLCAnc3JjL2Fzc2V0cy9ib21icy5wbmcnKTtcclxuICB9XHJcblxyXG59XHJcbiIsImltcG9ydCB7IGdldEdhbWVXaWR0aCwgZ2V0R2FtZUhlaWdodCB9IGZyb20gJy4uL2hlbHBlcnMnO1xyXG5cclxuaW1wb3J0IHsgQ2hhcmFjdGVyIH0gZnJvbSAnLi4vbW9kZWxzL2NoYXJhY3Rlcic7XHJcbmltcG9ydCB7IEJvbWIgfSBmcm9tICcuLi9tb2RlbHMvYm9tYnMnO1xyXG5pbXBvcnQgeyBQaHlzaWNzIH0gZnJvbSAncGhhc2VyJztcclxuXHJcbmNvbnN0IHNjZW5lQ29uZmlnOiBQaGFzZXIuVHlwZXMuU2NlbmVzLlNldHRpbmdzQ29uZmlnID0ge1xyXG4gIGFjdGl2ZTogZmFsc2UsXHJcbiAgdmlzaWJsZTogZmFsc2UsXHJcbiAga2V5OiAnR2FtZScsXHJcbn07XHJcblxyXG5leHBvcnQgY2xhc3MgR2FtZVNjZW5lIGV4dGVuZHMgUGhhc2VyLlNjZW5lIHtcclxuXHJcbiAgcHJpdmF0ZSBjaGFyYWN0ZXI6IENoYXJhY3RlcjtcclxuICBwcml2YXRlIHNjb3JlOiBudW1iZXI7XHJcbiAgcHJpdmF0ZSBsaXZlczogbnVtYmVyO1xyXG4gIHByaXZhdGUgc2NvcmVUZXh0OiBQaGFzZXIuR2FtZU9iamVjdHMuVGV4dDtcclxuICBwcml2YXRlIGxpdmVzVGV4dDogUGhhc2VyLkdhbWVPYmplY3RzLlRleHQ7XHJcbiAgcHJpdmF0ZSBzY29yZUV2ZW50OiBQaGFzZXIuVGltZS5UaW1lckV2ZW50O1xyXG4gIHByaXZhdGUgYm9tYjogQm9tYjtcclxuICBwcml2YXRlIGJvbWJzOiBQaGFzZXIuR2FtZU9iamVjdHMuR3JvdXA7XHJcbiAgcHJpdmF0ZSBsaXZlc0V2ZW50OiBQaGFzZXIuRXZlbnRzLkV2ZW50RW1pdHRlcjtcclxuXHJcbiAgY29uc3RydWN0b3IoKSB7XHJcbiAgICBzdXBlcihzY2VuZUNvbmZpZyk7XHJcblxyXG4gIH1cclxuXHJcbiAgcHVibGljIGluaXQoKTogdm9pZCB7XHJcbiAgICB0aGlzLnNjb3JlID0gMDtcclxuICAgIHRoaXMubGl2ZXMgPSA1MDtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBjcmVhdGUoKSB7XHJcblxyXG4gICAgdGhpcy5hZGQuaW1hZ2UoNDAwLCA0MDAsICdiYWNrZ3JvdW5kJyk7XHJcblxyXG4gICAgdGhpcy5zY29yZVRleHQgPSB0aGlzLmFkZC50ZXh0KGdldEdhbWVXaWR0aCh0aGlzKSAtIDEwMCwgMTAsICdTY29yZTogJyArIHRoaXMuc2NvcmUpO1xyXG4gICAgdGhpcy5saXZlc1RleHQgPSB0aGlzLmFkZC50ZXh0KDEwLCAxMCwgJ0xpdmVzIGxlZnQ6ICcgKyB0aGlzLmxpdmVzKTtcclxuXHJcbiAgICB0aGlzLmNoYXJhY3RlciA9IG5ldyBDaGFyYWN0ZXIoe1xyXG4gICAgICBzY2VuZTogdGhpcyxcclxuICAgICAgeDogMjAsXHJcbiAgICAgIHk6IGdldEdhbWVIZWlnaHQodGhpcykgLSA1MCxcclxuICAgICAga2V5OiAnbWFuJyxcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMuYm9tYnMgPSB0aGlzLmFkZC5ncm91cCh7IGNsYXNzVHlwZTogQm9tYiwgcnVuQ2hpbGRVcGRhdGU6IHRydWUgfSk7XHJcblxyXG4gICAgdGhpcy5waHlzaWNzLndvcmxkLnNldEJvdW5kcygwLCAwLCBnZXRHYW1lV2lkdGgodGhpcyksIGdldEdhbWVIZWlnaHQodGhpcykpO1xyXG5cclxuICAgIHRoaXMuc2NvcmVFdmVudCA9IHRoaXMudGltZS5hZGRFdmVudCh7XHJcbiAgICAgIGRlbGF5OiAxMDAwLFxyXG4gICAgICBjYWxsYmFjazogdGhpcy5kcm9wQm9tYnMsXHJcbiAgICAgIGNhbGxiYWNrU2NvcGU6IHRoaXMsXHJcbiAgICAgIGxvb3A6IHRydWUsXHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLmxpdmVzRXZlbnQgPSB0aGlzLmV2ZW50cztcclxuICAgIHRoaXMubGl2ZXNFdmVudC5hZGRMaXN0ZW5lcignbWlzc2VkQm9tYicsIHRoaXMubWlzc2VkQm9tYiwgdGhpcyk7XHJcblxyXG4gICAgLy8gdGhpcy5waHlzaWNzLndvcmxkLm9uKCd3b3JsZGJvdW5kcycsIHRoaXMub25Xb3JsZEJvdW5kLCB0aGlzKTtcclxuXHJcbiAgICB0aGlzLnBoeXNpY3MuYWRkLmNvbGxpZGVyKHRoaXMuYm9tYnMsIHRoaXMuY2hhcmFjdGVyLCB0aGlzLm9uaGl0Ym9tYiwgbnVsbCwgdGhpcyk7XHJcblxyXG4gICAgLy8gdGhpcy5waHlzaWNzLmNvbGxpZGUodGhpcy5ib21icywgdGhpcy5jaGFyYWN0ZXIsIHRoaXMub25oaXRib21iLCBudWxsLCB0aGlzKTtcclxuXHJcbiAgfVxyXG5cclxuICBwdWJsaWMgdXBkYXRlKCkge1xyXG4gICAgLy8gRXZlcnkgZnJhbWUsIHdlIGNyZWF0ZSBhIG5ldyB2ZWxvY2l0eSBmb3IgdGhlIHNwcml0ZSBiYXNlZCBvbiB3aGF0IGtleXMgdGhlIHBsYXllciBpcyBob2xkaW5nIGRvd24uXHJcblxyXG4gICAgdGhpcy5jaGFyYWN0ZXIudXBkYXRlKCk7XHJcblxyXG4gICAgaWYgKHRoaXMubGl2ZXMgPD0gMCkge1xyXG4gICAgICB0aGlzLnNob3dHYW1lT3ZlcigpO1xyXG4gICAgfVxyXG5cclxuICB9XHJcblxyXG4gIHByaXZhdGUgZHJvcEJvbWJzKCk6IHZvaWQge1xyXG4gICAgdGhpcy5jcmVhdGVCb21iKCk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGNyZWF0ZUJvbWIoKTogdm9pZCB7XHJcbiAgICB0aGlzLmJvbWJzLmFkZChuZXcgQm9tYih7XHJcbiAgICAgIHNjZW5lOiB0aGlzLFxyXG4gICAgICB4OiBQaGFzZXIuTWF0aC5CZXR3ZWVuKDAsIGdldEdhbWVXaWR0aCh0aGlzKSAtIDMyKSxcclxuICAgICAgeTogMCxcclxuICAgICAga2V5OiAnYm9tYicsXHJcbiAgICB9KSxcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIG9uaGl0Ym9tYihvYmplY3QxOiBCb21iLCBvYmplY3QyOiBDaGFyYWN0ZXIpOiB2b2lkIHtcclxuICAgIG9iamVjdDEuZGVzdHJveSgpO1xyXG4gICAgdGhpcy5zY29yZSsrO1xyXG4gICAgdGhpcy5zY29yZVRleHQuc2V0VGV4dCgnU2NvcmU6ICcgKyB0aGlzLnNjb3JlKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgbWlzc2VkQm9tYigpOiB2b2lkIHtcclxuXHJcbiAgICB0aGlzLmxpdmVzLS07XHJcbiAgICB0aGlzLmxpdmVzVGV4dC5zZXRUZXh0KCdMaXZlcyBsZWZ0OiAnICsgdGhpcy5saXZlcyk7XHJcblxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBzaG93R2FtZU92ZXIoKTogdm9pZCB7XHJcblxyXG4gICAgdGhpcy5hZGQudGV4dChnZXRHYW1lV2lkdGgodGhpcykgKiAwLjUgLSAxMDAsIGdldEdhbWVIZWlnaHQodGhpcykgKiAwLjUsICdHQU1FIE9WRVInLCB7XHJcbiAgICAgIGZvbnRTaXplOiAzMCxcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMucGh5c2ljcy5zaHV0ZG93bigpO1xyXG4gICAgdGhpcy5zY29yZUV2ZW50LmRlc3Ryb3koKTtcclxuICAgIHRoaXMubGl2ZXNFdmVudC5yZW1vdmVMaXN0ZW5lcignbWlzc2VkQm9tYicpO1xyXG5cclxuICAgIHRoaXMudGltZS5hZGRFdmVudCh7XHJcbiAgICAgIGRlbGF5OiA4MDAwLFxyXG4gICAgICBjYWxsYmFjazogdGhpcy5nYW1lUmVzdGFydCxcclxuICAgICAgY2FsbGJhY2tTY29wZTogdGhpcyxcclxuICAgICAgbG9vcDogZmFsc2UsXHJcblxyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gdGhpcy5zY2VuZS5wYXVzZSgpO1xyXG5cclxuICB9XHJcblxyXG4gIHByaXZhdGUgZ2FtZVJlc3RhcnQoKTogdm9pZCB7XHJcbiAgICB0aGlzLnNjZW5lLnJlc3RhcnQoKTtcclxuICB9XHJcbn1cclxuIiwiXHJcbmV4cG9ydCBjbGFzcyBDaGFyYWN0ZXIgZXh0ZW5kcyBQaGFzZXIuR2FtZU9iamVjdHMuU3ByaXRlIHtcclxuXHJcbiAgICBwcml2YXRlIHNwZWVkOiBudW1iZXIgPSAyMDA7XHJcblxyXG4gICAgcHJpdmF0ZSBjdXJzb3JLZXlzOiBQaGFzZXIuVHlwZXMuSW5wdXQuS2V5Ym9hcmQuQ3Vyc29yS2V5cztcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihwYXJhbXMpIHtcclxuICAgICAgICBzdXBlcihwYXJhbXMuc2NlbmUsIHBhcmFtcy54LCBwYXJhbXMueSwgcGFyYW1zLmtleSwgcGFyYW1zLmZyYW1lKTtcclxuXHJcbiAgICAgICAgdGhpcy5zZXRPcmlnaW4oMCwgMCk7XHJcblxyXG4gICAgICAgIHRoaXMuc2NlbmUucGh5c2ljcy53b3JsZC5lbmFibGUodGhpcyk7XHJcbiAgICAgICAgKHRoaXMuYm9keSBhcyBhbnkpLnNldEdyYXZpdHlZKDEwMDAwKTtcclxuICAgICAgICAodGhpcy5ib2R5IGFzIGFueSkuc2V0Q29sbGlkZVdvcmxkQm91bmRzKHRydWUpO1xyXG4gICAgICAgIC8vICh0aGlzLmJvZHkgYXMgYW55KS5vbldvcmxkQm91bmRzID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgdGhpcy5jdXJzb3JLZXlzID0gdGhpcy5zY2VuZS5pbnB1dC5rZXlib2FyZC5jcmVhdGVDdXJzb3JLZXlzKCk7XHJcblxyXG4gICAgICAgIHRoaXMuc2NlbmUuYWRkLmV4aXN0aW5nKHRoaXMpO1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgdXBkYXRlKCk6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IHZlbG9jaXR5ID0gbmV3IFBoYXNlci5NYXRoLlZlY3RvcjIoMCwgMCk7XHJcbiAgICAgICAgaWYgKHRoaXMuY3Vyc29yS2V5cy5sZWZ0LmlzRG93bikge1xyXG4gICAgICAgICAgICB2ZWxvY2l0eS54IC09IDE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmN1cnNvcktleXMucmlnaHQuaXNEb3duKSB7XHJcbiAgICAgICAgICAgIHZlbG9jaXR5LnggKz0gMTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IG5vcm1hbGl6ZWRWZWxvY2l0eSA9IHZlbG9jaXR5Lm5vcm1hbGl6ZSgpO1xyXG5cclxuICAgICAgICAodGhpcy5ib2R5IGFzIGFueSkuc2V0VmVsb2NpdHkobm9ybWFsaXplZFZlbG9jaXR5LnggKiB0aGlzLnNwZWVkLCBub3JtYWxpemVkVmVsb2NpdHkueSAqIHRoaXMuc3BlZWQpO1xyXG5cclxuICAgIH1cclxuXHJcbn1cclxuIiwiaW1wb3J0IHsgZ2V0R2FtZVdpZHRoLCBnZXRHYW1lSGVpZ2h0IH0gZnJvbSAnLi4vaGVscGVycyc7XHJcbmltcG9ydCB7IFBoeXNpY3MgfSBmcm9tICdwaGFzZXInO1xyXG5cclxuZXhwb3J0IGNsYXNzIEJvbWIgZXh0ZW5kcyBQaGFzZXIuR2FtZU9iamVjdHMuU3ByaXRlIHtcclxuXHJcbiAgICBwcml2YXRlIGdyYXZpdHk6IG51bWJlciA9IDEwMDtcclxuICAgIHByaXZhdGUgbWlzc2VkQm9tYjogUGhhc2VyLkV2ZW50cy5FdmVudEVtaXR0ZXI7XHJcblxyXG4gICAgY29uc3RydWN0b3IocGFyYW1zKSB7XHJcbiAgICAgICAgc3VwZXIocGFyYW1zLnNjZW5lLCBwYXJhbXMueCwgcGFyYW1zLnksIHBhcmFtcy5rZXksIHBhcmFtcy5mcmFtZSk7XHJcblxyXG4gICAgICAgIHRoaXMuc2V0T3JpZ2luKDAsIDApO1xyXG5cclxuICAgICAgICB0aGlzLnNjZW5lLnBoeXNpY3Mud29ybGQuZW5hYmxlKHRoaXMpO1xyXG4gICAgICAgICh0aGlzLmJvZHkgYXMgYW55KS5zZXRHcmF2aXR5WSgxNTApO1xyXG4gICAgICAgIC8vICh0aGlzLmJvZHkgYXMgYW55KS5zZXRDb2xsaWRlV29ybGRCb3VuZHModHJ1ZSk7XHJcbiAgICAgICAgLy8gKHRoaXMuYm9keSBhcyBhbnkpLm9uV29ybGRCb3VuZHMgPSB0cnVlO1xyXG5cclxuICAgICAgICB0aGlzLm1pc3NlZEJvbWIgPSB0aGlzLnNjZW5lLmV2ZW50cztcclxuICAgICAgICB0aGlzLnNjZW5lLmFkZC5leGlzdGluZyh0aGlzKTtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHVwZGF0ZSgpOiB2b2lkIHtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMueSA+IGdldEdhbWVIZWlnaHQodGhpcy5zY2VuZSkpIHtcclxuICAgICAgICAgICAgdGhpcy5taXNzZWRCb21iLmVtaXQoJ21pc3NlZEJvbWInKTtcclxuICAgICAgICAgICAgdGhpcy5kZXN0cm95KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCAqIGFzIFBoYXNlciBmcm9tICdwaGFzZXInO1xyXG5cclxuZXhwb3J0IGNvbnN0IGdldEdhbWVXaWR0aCA9IChzY2VuZTogUGhhc2VyLlNjZW5lKSA9PiB7XHJcbiAgICByZXR1cm4gc2NlbmUuZ2FtZS5zY2FsZS53aWR0aDtcclxuICB9O1xyXG5cclxuZXhwb3J0IGNvbnN0IGdldEdhbWVIZWlnaHQgPSAoc2NlbmU6IFBoYXNlci5TY2VuZSkgPT4ge1xyXG4gICAgcmV0dXJuIHNjZW5lLmdhbWUuc2NhbGUuaGVpZ2h0O1xyXG4gIH07XHJcbiIsImltcG9ydCAqIGFzIFBoYXNlciBmcm9tICdwaGFzZXInO1xyXG5pbXBvcnQgU2NlbmVzIGZyb20gJy4vc2NlbmVzJztcclxuXHJcbmNvbnN0IGdhbWVDb25maWc6IFBoYXNlci5UeXBlcy5Db3JlLkdhbWVDb25maWcgPSB7XHJcbiAgdGl0bGU6ICdTYW1wbGUnLFxyXG5cclxuICB0eXBlOiBQaGFzZXIuQVVUTyxcclxuXHJcbiAgc2NhbGU6IHtcclxuICAgIHdpZHRoOiA4MDAsXHJcbiAgICBoZWlnaHQ6IDYwMCxcclxuICB9LFxyXG5cclxuICBzY2VuZTogU2NlbmVzLFxyXG5cclxuICBwaHlzaWNzOiB7XHJcbiAgICBkZWZhdWx0OiAnYXJjYWRlJyxcclxuICAgIGFyY2FkZToge1xyXG4gICAgICBkZWJ1ZzogZmFsc2UsXHJcbiAgICAgIGdyYXZpdHk6IHsgeDogMCwgeTogNSB9LFxyXG4gICAgfSxcclxuICB9LFxyXG5cclxuICByZW5kZXI6IHsgcGl4ZWxBcnQ6IHRydWUgfSxcclxuXHJcbiAgcGFyZW50OiAnY29udGVudCcsXHJcbiAgYmFja2dyb3VuZENvbG9yOiAnIzAwMDAwMCcsXHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgZ2FtZSA9IG5ldyBQaGFzZXIuR2FtZShnYW1lQ29uZmlnKTtcclxuXHJcbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCAoKSA9PiB7XHJcbiAgZ2FtZS5zY2FsZS5yZWZyZXNoKCk7XHJcbn0pO1xyXG4iXSwic291cmNlUm9vdCI6IiJ9